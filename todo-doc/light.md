


##### 灯效编写原则

按照灯效的表现可以分为2类灯效:

1. 在一定时间内明确会自己结束的。
2. 永远不会自己结束的，并且在被打断后需要恢复的。 


音量键按下的时候，音量灯光显示一个箭头灯效，持续 100ms，然后就自己结束了，此时调用 callback，向系统表明灯效渲染完成了。这个时候系统会去队列中恢复需要恢复的灯光。 

上面的音量灯效是属于第一类的，也就是在一定时间内明确会自己结束的。


配网灯光，会一直转圈，不会自己自动结束，并且在按下音量键后，配网灯光会被停止，音量灯光结束后，配网灯光还会恢复。

配网灯效是属于第二类的，也就是永远不会自己结束的，只能被调用方手动清除。并且被其它灯光打断后还会恢复。 需要调用Stop()停止该函数


灯效参数: (灯效名称name，优先级priority,是否恢复shouldResume)





灯光设计遵循下面几个原则:

高优先级灯光时，来了低优先级灯光，则不显示低优先级灯光。如果低优先级的灯光是需要恢复的，则放到相应的恢复队列中。
同级灯光A时，来了同级灯光B，则灯光B会打断灯光A。
低优先级灯光时，来了高优先级灯光，则高优先级灯光会打断低优先级灯光。
当前灯光执行完毕，从恢复队列中按照优先级从高到低恢复第一个。
灯效里面需要使用内置的 requestAnimationFrame 定时器。
系统灯效优先级无论大小，总是高于用户灯效优先级。